(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon",24,39,"PinRepEditButtonCommon"],{"+c4W":function(e,t,n){var r=n("711d"),o=n("4/ic"),i=n("9ggG"),s=n("9Nap");e.exports=function(e){return i(e)?r(s(e)):o(e)}},"/QE7":function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("q1tI"),o=n("z19Z"),i=n("EC67");function s(e){const{children:t,__dangerouslyDisableSpammyDomainCheck:n,externalData:s,href:a,isExternalLink:c=!1,onClick:d,onHistoryChange:l,target:u}=e,[h,p]=Object(r.useState)(null),[b,f]=Object(r.useState)(!1),m=Object(i.g)(),v=Object(i.h)();return Object(r.useEffect)(()=>(f(!0),()=>{f(!1)}),[]),Object(r.useEffect)(()=>{c&&!n&&null===h&&Object(o.a)({isMounted:b,pin:null==s?void 0:s.pin,location:v,spamCheckCallback:e=>p(e),href:a})},[e]),t({handleClick:({event:e})=>{Object(o.b)({isExternalLink:c,event:e})||(e.nativeEvent.preventDefault(),d&&d({event:e}),a&&(c?Object(o.c)({href:a,pinId:null==s?void 0:s.pinId,pin:null==s?void 0:s.pin,location:v,auxData:null==s?void 0:s.auxData,spamCheck:h}):Object(o.d)({event:e,onHistoryChange:l,href:a,history:m,target:"blank"===u?"blank":null})))}})}},"0BOE":function(e,t,n){n.d(t,"a",(function(){return i}));const r={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=r[e.charAt(n)]||e.charAt(n);return t},i=(e,t,n="name")=>{const r=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),r=e.split(" ");let i=0;for(let s=0;s<r.length;s+=1)(o(r[s]).includes(n[i])||r[s].includes(n[i]))&&(i+=1);return i===n.length})(e[n].toLowerCase(),r))}},"0zyx":function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n("mVx/"),o=n.n(r);const i=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),s=e=>{const t=o()(e,e=>!i(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),r=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return r?decodeURIComponent(r[1]):""})(t):""}},"1LK5":function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},"1vym":function(e,t,n){},"2WXK":function(e,t,n){var r=n("q1tI");let o=null,i=!1,s=0;const a=()=>{o&&clearTimeout(o),i=!0,o=setTimeout(()=>{i=!1},100)};t.a=()=>{const[e,t]=Object(r.useState)(!1),n=Object(r.useRef)(null);Object(r.useEffect)(()=>(0===s&&window.addEventListener("scroll",a),s+=1,()=>{n.current&&clearTimeout(n.current),s-=1,s||window.removeEventListener("scroll",a)}),[]);const o=e=>{n.current&&clearTimeout(n.current),n.current=e&&i?setTimeout(()=>o(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:Object(r.useRef)({onMouseOver:()=>o(!0),onMouseLeave:()=>o(!1)}).current}}},"4/ic":function(e,t,n){var r=n("ZWtO");e.exports=function(e){return function(t){return r(t,e)}}},"5FNA":function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var r=n("qtKf"),o=n("Pqnw"),i=n("Wer7");const s=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],a={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:n,username:r})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:r,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},c=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),d=e=>s.reduce((t,n)=>{const s=[Object(o.a)("profileBoards",Object(r.c)(e,n))];return[!0,!1].forEach(t=>{[!0,!1].forEach(r=>{s.push(Object(i.f)(a.name,a.options({username:e,boardOrder:n,mixPublicSecret:t,filterStories:r})))})}),t.concat(s)},[])},"5uyJ":function(e,t,n){n.d(t,"a",(function(){return r}));const r={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"82UD":function(e,t,n){var r=n("nKUr"),o=n("q1tI"),i=n("/MKj"),s=n("T+9/"),a=n("ajUs"),c=n("ou9u"),d=n("hFNL"),l=n("qD10"),u=n("yKES"),h=n("5uyJ"),p=n("n6mq");const b={overlay:{__style:{backgroundColor:"#000"}}};function f(e){const{pin:{id:t,images:n,title:i,videos:s,video_status_message:a}}=e,c=a||{},d=n&&n["236x"],f=s&&s.video_list[h.a.V_HLSV4],{duration:m}=f||{};return Object(r.jsx)(o.Fragment,{children:Object(r.jsx)(p.i,{children:Object(r.jsxs)(l.a,{to:"/pin/"+t,children:[Object(r.jsxs)(p.e,{overflow:"hidden",position:"relative",rounding:2,children:[d&&Object(r.jsx)(p.w,{alt:i||"",color:"lightGray",naturalHeight:d.height,naturalWidth:d.width,src:d.url}),!!m&&Object(r.jsx)(p.e,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:Object(r.jsx)(u.a,{duration:m})}),Object(r.jsx)(p.e,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:b.overlay}),Object(r.jsxs)(p.e,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[Object(r.jsx)(p.t,{color:"white",overflow:"normal",size:"sm",children:c.title}),Object(r.jsx)(p.e,{marginTop:4,children:Object(r.jsx)(p.U,{color:"white",size:"md",overflow:"normal",children:c.subtitle})})]})]}),Object(r.jsx)(p.e,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:Object(r.jsx)(p.e,{flex:"grow",children:i&&Object(r.jsx)(p.e,{paddingY:1,children:Object(r.jsx)(p.U,{inline:!0,size:"md",weight:"bold",children:i})})})})]})})})}var m=n("Y8Sn"),v=n("vpxy"),j=n("0nTG");t.a=Object(i.connect)((function({pins:e},{pin:t,pinId:n}){return{reduxPin:e[n]||t}}),()=>({}))((function({reduxPin:e,trackingParameters:t,...n}){const l=Object(i.useSelector)(({location:e})=>e),u=Object(a.a)(e,l),h=Object(c.a)(e),p=!!(h&&h.url&&h.height&&h.width)||void 0,b=h&&e.videos?e.videos.id:void 0,[g,x]=Object(o.useState)(!1),O=Object(o.useCallback)(()=>x(!0),[]),y=Object(o.useCallback)(()=>x(!1),[]),{componentType:_,contextLogData:S,impressionAuxFields:w,slotIndex:I,viewData:C,viewParameter:B,viewType:D}=t;return Object(r.jsx)(s.a,{componentType:_,contextLogData:{..."undefined"!=typeof window?{pwa_type:Object(d.b)(window)}:{},...S,...Object(j.f)(e,S)},impressionAuxFields:{...w||{},isNativeVideoAndWatchable:p,videoIdStr:b,clientTrackingParams:u||(e.tracking_params||"")+"-0",imageURL:e.images&&e.images["236x"].url,richTypes:Object(j.e)(e)},impressionType:"Pin",isPaused:!g,loggingId:e.id,slotIndex:I,viewData:C,viewParameter:B,viewType:D,children:Object(m.h)(e)?Object(r.jsx)(f,{pin:e}):Object(r.jsx)(v.a,{...n,debugImpressionState:g?"started":"paused",onError:y,onLoad:O,pin:e,trackingParameters:{componentType:_,contextLogData:S,slotIndex:I,viewParameter:B,viewType:D}})})}))},"8Mj5":function(e,t,n){n.d(t,"a",(function(){return m}));var r=n("nKUr"),o=n("n6mq");function i({children:e}){return Object(r.jsx)(o.e,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:e})}var s=n("Ye/N");function a({onClick:e,overlap:t,size:n}){return Object(r.jsx)(o.e,{marginStart:t,children:Object(r.jsx)(i,{children:Object(r.jsx)(o.v,{accessibilityLabel:s.a._("Add","facePile.addButton","Accessibility label for button to add a collaborator"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:e,size:n})})})}function c({style:e}){return Object(r.jsx)(o.e,{bottom:!0,dangerouslySetInlineStyle:{__style:e||{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0})}function d({children:e,hovered:t}){return Object(r.jsxs)(o.e,{position:"relative",children:[Object(r.jsx)(c,{style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:null}),e]})}function l({addButtonRef:e,hovered:t,overlap:n}){return Object(r.jsx)(o.e,{dangerouslySetInlineStyle:{__style:{zIndex:1}},children:Object(r.jsx)(o.e,{marginStart:n,children:Object(r.jsx)(d,{hovered:t,children:Object(r.jsx)(i,{children:Object(r.jsx)(o.e,{alignItems:"center",color:"lightGray",display:"flex",height:48,justifyContent:"center",ref:e,rounding:"circle",width:48,children:Object(r.jsx)(o.u,{accessibilityLabel:s.a._("Add","ui.Facepile","Accessibility label on icon"),icon:"add",color:"darkGray",size:20})})})})})},"addIcon")}const u={xs:24,sm:32,md:40,lg:48,xl:56};function h({count:e,size:t}){const n=u[t];return Object(r.jsx)(i,{children:Object(r.jsx)(o.e,{alignItems:"center",color:"lightGray",display:"flex",height:n,justifyContent:"center",position:"relative",rounding:"circle",width:n,children:Object(r.jsx)(o.U,{size:"lg",weight:"bold",children:e>99?"99+":e})})})}var p=n("7pfs"),b=n("FDmi");function f({isDim:e,name:t,size:n,src:i}){const s=u[n];return Object(r.jsx)(o.e,{color:"white",height:s,width:s,rounding:"circle",children:Object(r.jsx)(o.e,{dangerouslySetInlineStyle:{__style:{opacity:e?.5:1}},children:Object(r.jsx)(b.a,{name:t,outline:!0,src:i})})})}function m({addButtonRef:e,additionalCount:t,faces:n,faceSize:i,onAddClick:s,onClick:c,oneClickTargetFacepile:u,overlap:b,pileRef:m,showAddButton:v}){const j=({apply:e,children:t})=>Object(r.jsx)(o.e,{marginStart:e?b:void 0,children:t});return Object(r.jsx)(p.a,{children:({hovered:p,onMouseEnter:g,onMouseLeave:x})=>{const O=n.map(({isDim:e,key:t,name:n,src:o},s)=>Object(r.jsx)(j,{apply:0!==s,children:Object(r.jsx)(d,{hovered:p&&!!c,children:Object(r.jsx)(f,{isDim:e,name:n,size:i,src:o},null!=t?t:n)})},"face-"+s));t&&O.push(Object(r.jsx)(o.e,{dangerouslySetInlineStyle:{__style:{zIndex:1}},children:Object(r.jsx)(j,{apply:!0,children:Object(r.jsx)(d,{hovered:p&&!!c,children:Object(r.jsx)(h,{count:t,size:i})})})},"additionalCount")),u&&v&&O.push(Object(r.jsx)(l,{addButtonRef:e,hovered:p&&!!c,overlap:b}));const y=c?Object(r.jsx)(o.T,{ref:m,onTap:c,rounding:"pill",children:Object(r.jsx)(o.e,{alignItems:"center",display:"flex",children:O})}):O;return Object(r.jsxs)(o.e,{alignItems:"center",display:"flex",onMouseEnter:g,onMouseLeave:x,children:[y,!u&&v&&s&&Object(r.jsx)(o.e,{dangerouslySetInlineStyle:{__style:{zIndex:2}},ref:e,children:Object(r.jsx)(a,{onClick:s,overlap:b,size:i})})]})}})}},"8cMa":function(e,t,n){var r=n("nKUr"),o=n("Ye/N"),i=n("n6mq");t.a=function({type:e}){const t={group:{accessibilityLabel:o.a._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:o.a._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:o.a._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return Object(r.jsx)(i.e,{marginStart:1,children:Object(r.jsx)(i.e,{marginStart:2,children:"sections"===e||"sectionsInline"===e?Object(r.jsx)(i.u,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):Object(r.jsx)(i.u,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})})})}},"9QW3":function(e,t,n){n.d(t,"a",(function(){return s}));const r={row:0,section:0},o={row:-1,section:-1},i=()=>{};class s{constructor(e){this.index=Object.assign({},r),this.sections=e,this.updateCallback=i,this.selectItem=i}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===o.row&&t===o.section?this.index=Object.assign({},r):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===o.row&&t===o.section)this.index=Object.assign({},r);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},o),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},CMye:function(e,t,n){var r=n("GoyQ");e.exports=function(e){return e==e&&!r(e)}},DzJC:function(e,t,n){var r=n("sEfC"),o=n("GoyQ");e.exports=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:i,maxWait:t,trailing:s})}},EC51:function(e,t,n){var r=n("nKUr"),o=n("q1tI"),i=n("/QE7"),s=n("zwad"),a=n("n6mq");const c=Object(o.forwardRef)((e,t)=>{const{accessibilityLabel:n,children:o,__dangerouslyDisableSpammyDomainCheck:c,externalData:d,hoverStyle:l,href:u,id:h,inline:p,onBlur:b,onClick:f,onFocus:m,onHistoryChange:v,target:j}=e,g=s.a.isOffsiteUrl(u);return Object(r.jsx)(i.a,{__dangerouslyDisableSpammyDomainCheck:g?c:void 0,href:u,isExternalLink:g,externalData:g?d:void 0,onClick:f,onHistoryChange:g?void 0:v,target:g?void 0:j,children:({handleClick:e})=>Object(r.jsx)(a.A,{accessibilityLabel:n,hoverStyle:l,href:u,id:h,inline:p,onBlur:b,onClick:e,onFocus:m,ref:t,rel:g?"nofollow":void 0,children:o})})});c.displayName="Link",t.a=c},EuRG:function(e,t,n){function r(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function o(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function i(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}))},GDhZ:function(e,t,n){var r=n("wF/u"),o=n("mwIZ"),i=n("hgQt"),s=n("9ggG"),a=n("CMye"),c=n("IOzZ"),d=n("9Nap");e.exports=function(e,t){return s(e)&&a(t)?c(d(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?i(n,e):r(t,s,3)}}},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return r}));const r=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},IBrh:function(e,t,n){n.d(t,"a",(function(){return c}));var r=n("nKUr"),o=n("q1tI"),i=n("mEMi"),s=(n("9QW3"),n("n6mq"));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends o.Component{constructor(e){super(e),a(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),a(this,"handleIndexUpdate",e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),a(this,"handleSelectItem",e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)}),a(this,"handleMouseEnter",e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)}),a(this,"handleMouseLeave",()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),a(this,"renderItems",(e,t)=>{const{renderItem:n}=this.props,{selectedIndex:o}=this.state,{row:i,section:a}=o||{},{customProps:c={},items:d,renderItem:l}=e,{isDisabled:u=(e=>!1)}=c,h=t===a,p=l||n;return p&&d.map((e,n)=>{const o=u(e),a={section:t,row:n},d=h&&n===i;return Object(r.jsx)(s.e,{"data-test-id":"board-selection",ref:!o&&d?this.setSelectedItemRef:null,children:o?p({item:e,hovered:d,sectionProps:c}):Object(r.jsx)(s.T,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(a),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:p({item:e,hovered:d,sectionProps:c})})},n)})}),a(this,"renderSections",()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map((t,n)=>Object(r.jsxs)(s.e,{children:[e&&e(t,n),this.renderItems(t,n)]},n))});const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),r=n.top,o=n.bottom,i=t.getBoundingClientRect(),s=i.top;o>=i.bottom?e.scrollIntoView(!1):r<=s&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return Object(r.jsx)(i.a,{fetchMore:n,children:({setRef:n,onScroll:o})=>Object(r.jsx)(s.e,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:o,overflow:"auto",ref:e=>{this.containerRef=e,n(e)},children:this.renderSections()})})}}},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},IWTy:function(e,t,n){var r=n("yue5");e.exports=function(e,t,n){for(var o=-1,i=e.criteria,s=t.criteria,a=i.length,c=n.length;++o<a;){var d=r(i[o],s[o]);if(d)return o>=c?d:d*("desc"==n[o]?-1:1)}return e.index-t.index}},JELi:function(e,t,n){var r=n("KwMD"),o=n("ut/Y"),i=n("Sxd8"),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var d=c-1;return void 0!==n&&(d=i(n),d=n<0?s(c+d,0):a(d,c-1)),r(e,o(t,3),d,!0)}},KwMD:function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},MNxV:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("nKUr"),o=n("XRfM"),i=n("pLLR");const s=o.b.DateFormatType;t.b=({dateFormatType:e,useUTC:t=!0,value:n})=>Object(r.jsx)(i.b,{children:r=>o.b.formatDate(r.locale,n,e,t)})},NdQN:function(e,t,n){var r=n("nKUr"),o=n("q1tI"),i=n("JW66"),s=n("Ye/N"),a=(n("9QW3"),n("n6mq"));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends o.Component{constructor(...e){super(...e),c(this,"setInputRef",e=>{e&&(this._input=e)}),c(this,"handleKeyDown",e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case i.a.KeyCode.ENTER:case i.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),n.select();break;case i.a.KeyCode.UP:e.preventDefault(),n.prev();break;case i.a.KeyCode.DOWN:e.preventDefault(),n.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return Object(r.jsx)("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"},children:Object(r.jsx)(a.K,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:s.a._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t})})}}t.a=d},NjDU:function(e,t,n){function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function i(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function s(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return c}));const a=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),c=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}})},O7RO:function(e,t,n){var r=n("CMye"),o=n("7GkX");e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,r(s)]}return t}},Pqnw:function(e,t,n){function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",(function(){return r}))},QKYm:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return l}));const r=3,o={square:{width:236,height:236},wide:{width:300,height:200},xWide:{width:358,height:200},xxWide:{width:376,height:200}},i={square:{width:236,height:176},wide:{width:300,height:135},xWide:{width:358,height:200},xxWide:{width:376,height:200}},s={square:{width:236,height:157},wide:{width:320,height:213}};function a(e,t){return t?i[e].width:o[e].width}function c(e,t){return t?i[e].height:o[e].height}function d(e){return s["square"===e?"square":"wide"]}function l(e){return"list"===e?"100%":d(e).width+16}},Sxd8:function(e,t,n){var r=n("ZCgT");e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},WnNx:function(e,t,n){function r(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function o(){return{type:"HIDE_REPIN_ANIMATION"}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},Wrea:function(e,t,n){n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var r=n("Wer7");const o=(e,t)=>n=>n(Object(r.a)("BoardResource",{board_id:e,field_set_key:t})),i=e=>o(e,"pin_count"),s=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),a=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),c=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),d=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},XKAG:function(e,t,n){var r=n("ut/Y"),o=n("MMmD"),i=n("7GkX");e.exports=function(e){return function(t,n,s){var a=Object(t);if(!o(t)){var c=r(n,3);t=i(t),n=function(e){return c(a[e],e,a)}}var d=e(t,n,s);return d>-1?a[c?t[d]:d]:void 0}}},ZCgT:function(e,t,n){var r=n("tLB3"),o=1/0;e.exports=function(e){return e?(e=r(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},ZCpW:function(e,t,n){var r=n("lm/5"),o=n("O7RO"),i=n("IOzZ");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},ZE2w:function(e,t,n){n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var r=n("4dcN"),o=n("eOdZ");const i="collaborator_approve_invite";function s(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function a(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return n=>o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{r.a.trackEvent(i,"success")}).catch(()=>r.a.trackEvent(i,"error"))}function d(e,t,n){return t=>{const{invited_user:r,status:i,board:{id:s}}=e;return o.a.create("accepted"===i?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:s,field_set_key:"boardEdit",invited_user_id:r.id}).callDelete({showError:!1})}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s}));const r={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function i(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function s(e){return!!e&&e.severity===o.ABUSIVE}},a49R:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("nKUr"),o=n("q1tI"),i=(n("17x9"),n("n6mq"));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=Object(o.createContext)(()=>{});class c extends o.Component{constructor(...e){super(...e),s(this,"state",{flyout:void 0,showOnTopOfModal:!1}),s(this,"setActive",(e,t,n=!1)=>{if(e){const e={...t,onDismiss:()=>{t&&t.onDismiss&&(t.onDismiss(),this.setState({flyout:void 0}))},positionRelativeToAnchor:!1};this.setState({flyout:{props:e},showOnTopOfModal:n})}else this.setState({flyout:void 0})})}render(){var e,t,n,s,c,d,l,u,h;const{flyout:p,showOnTopOfModal:b}=this.state,{children:f}=this.props;return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)(a.Provider,{value:this.setActive,children:f}),p&&Object(r.jsx)("div",{...b?{style:{zIndex:752,position:"absolute",top:0}}:{},children:Object(r.jsx)(i.r,{anchor:null===(e=p.props)||void 0===e?void 0:e.anchor,onDismiss:null===(t=p.props)||void 0===t?void 0:t.onDismiss,color:null===(n=p.props)||void 0===n?void 0:n.color,idealDirection:null===(s=p.props)||void 0===s?void 0:s.idealDirection,positionRelativeToAnchor:null===(c=p.props)||void 0===c?void 0:c.positionRelativeToAnchor,shouldFocus:null===(d=p.props)||void 0===d?void 0:d.shouldFocus,showCaret:null===(l=p.props)||void 0===l?void 0:l.showCaret,size:null===(u=p.props)||void 0===u?void 0:u.size,children:null===(h=p.props)||void 0===h?void 0:h.children})})]})}}t.b=c},alwl:function(e,t,n){var r=n("eUgh"),o=n("ZWtO"),i=n("ut/Y"),s=n("l9OW"),a=n("1LK5"),c=n("sEf8"),d=n("IWTy"),l=n("zZ0H"),u=n("Z0cm");e.exports=function(e,t,n){t=t.length?r(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[l];var h=-1;t=r(t,c(i));var p=s(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++h,value:e}}));return a(p,(function(e,t){return d(e,t,n)}))}},c50B:function(e,t,n){n.d(t,"o",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"m",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"n",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"q",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return j})),n.d(t,"s",(function(){return g})),n.d(t,"p",(function(){return x})),n.d(t,"k",(function(){return O})),n.d(t,"r",(function(){return y})),n.d(t,"t",(function(){return _}));const r=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach((e,r)=>{const o=t[e];o&&(n[r]=o)}),n.join("")};function o(e){return function(t,n){const r=[];t&&/\S/.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}const i=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function s(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(i)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function a(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function c(e){return function(t,n){const o=r(t.trim()),i=[];o&&""!==o&&o.length<2&&i.push(e.ageTooShortString);const s=Math.floor(parseInt(o,10));""===o||/^\d+$/.test(o)&&s>0&&s<300||i.push(e.invalidAgeString);const a={errors:i,warnings:[]};return n&&n(a),a}}function d(e){return function(t,n){const r=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),o=[],i=!1!==e.checkLength&&r.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!i||o.push(e.message);const s={errors:o,warnings:[]};return n&&n(s),s}}function l(e){return function(t,n){const o=/^\d+$/,i=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(o)&&i.push(e.message));const s={errors:i,warnings:[]};return n&&n(s),s}}function u(e){return function(t,n){const o=/^[\d\ -]+$/,i=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(o)&&i.push(e.message));const s={errors:i,warnings:[]};return n&&n(s),s}}function h(e){return function(t,n){const r=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function p(e){return function(t,n){const r=[];(e.should_trim||!1)&&(t=t&&t.trim());const o=t.length;e.min&&o<e.min?r.push(e.minErrorString):e.max&&o>e.max&&r.push(e.maxErrorString);const i={errors:r,warnings:[]};return n&&n(i),i}}function b(e){return function(t,n){const r=[];t!==(e&&e.targetValue)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function f(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<=e.value&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function m(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<e.value&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function v(e){return function(t,n){const r=[];/^[\040-\176]*$/.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function j(e){return function(t,n){const r=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,o=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(r)&&(t=t&&t.trim(),o.push(e.message));const i={errors:o,warnings:[]};return n&&n(i),i}}function g(e){return function(t,n){t=t&&t.trim();const r=[],o=new Date(t);t&&!o.getTime()&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function x(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function O(e){return function(t,n){const r=[];e.pattern.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function y(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}function _(e,t){let n="";return t.some(t=>{const r=t(e);return r.errors.length>0&&(n=r.errors[0],!0)}),n}},e0nq:function(e,t,n){function r(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function i(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function s(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}))},fEA9:function(e,t,n){n.r(t),n.d(t,"PinBetterSave",(function(){return ee}));var r=n("nKUr"),o=n("q1tI"),i=n("/MKj"),s=(n("1vym"),n("TSYQ")),a=n.n(s),c=n("Ye/N"),d=n("pLLR"),l=n("n6mq");function u(e){const{dropdownClasses:t,dropdownRef:n,onBoardDropdownClick:i,onSaveClick:s,renderPinSaveTooltip:d,saveButtonClasses:u,saveButtonRef:h,showSaveButton:p,textColor:b,title:f,hideDropdown:m}=e;return m?Object(r.jsx)(l.e,{alignItems:"center",justifyContent:"end",display:"flex",width:"100%",height:44,children:Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("button",{className:u,onClick:i,"data-test-id":"PinBetterSaveButton",ref:n,children:Object(r.jsx)(l.U,{color:"white",size:"sm",weight:"bold",children:c.a._("Save","BetterSave.Save.HideDropdown.label","BetterSave Save label")})}),!!d&&!!h.current&&d(h.current)]})}):Object(r.jsxs)(l.e,{alignItems:"center",display:"flex",width:"100%",height:44,children:[Object(r.jsx)("button",{className:t,"data-test-id":"PinBetterSaveDropdown",onClick:i,ref:n,children:Object(r.jsxs)(l.e,{paddingX:4,display:"flex",flex:"grow",alignItems:"center",children:[Object(r.jsx)(l.e,{flex:"grow",overflow:"hidden",children:Object(r.jsx)(l.U,{color:b,truncate:!0,size:"sm",children:Object(r.jsx)("span",{className:a()("PinBetterSave__DropdownText","PinBetterSave__DropdownText--lego"),children:f})})}),Object(r.jsx)(l.e,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown",children:Object(r.jsx)("div",{className:a()("PinBetterSave__DownArrowContainer","PinBetterSave__DownArrowContainer--lego"),children:Object(r.jsx)(l.u,{accessibilityLabel:c.a._("Select a board you want to save to","BetterSave accessibility label to change the board","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12})})})]})}),p&&Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("button",{className:u,onClick:s,"data-test-id":"PinBetterSaveButton",ref:h,children:Object(r.jsx)(l.U,{color:"white",size:"sm",weight:"bold",children:c.a._("Save","BetterSave Save label","BetterSave Save label")})}),!!d&&!!h.current&&d(h.current)]})]})}function h(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:i,saveButtonRef:s,hideDropdown:a=!1,title:d,view:u}=e,h="closeup"===u?"darkGray":"white";return Object(r.jsxs)(l.e,{alignItems:"center",display:"flex",width:"100%",ref:t,children:[!a&&Object(r.jsx)(l.e,{flex:"grow",width:"100%",children:Object(r.jsx)(l.T,{onTap:({event:e})=>n(e),children:Object(r.jsxs)(l.e,{alignItems:"center",display:"flex",flex:"grow",paddingX:3,children:[Object(r.jsx)(l.e,{flex:"grow",children:Object(r.jsx)(l.U,{color:h,size:"lg",weight:"bold",truncate:!0,children:d})}),Object(r.jsx)(l.e,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown",children:Object(r.jsx)(l.u,{accessibilityLabel:c.a._("Select a board you want to save to","PinBetterSave.BoardSelection.DropdownIcon","BetterSave accessibility label to change the board"),color:h,icon:"arrow-down",size:12})})]})})}),Object(r.jsx)(l.e,{flex:"none",marginStart:"auto",children:Object(r.jsx)(l.f,{color:"red",inline:!0,onClick:({event:e})=>{o(e)},ref:s,size:"lg",text:c.a._("Save","PinBetterSave.BoardSelection.SaveButton","BetterSave Save label")})}),!!i&&!!s.current&&i(s.current)]})}function p(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:i,renderPinSaveTooltip:s,selectedTitle:c,showSaveButton:l,unselectedText:p,shouldUseLegoStyles:b,view:f,hideDropdown:m}=e,{isRTL:v}=Object(d.d)(),j=Object(o.useRef)(),g=c||p;if(b)return Object(r.jsx)(h,{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:i,renderPinSaveTooltip:s,saveButtonRef:j,hideDropdown:m,title:g,view:f});const x=a()("PinBetterSave__Button",{"PinBetterSave__Button--rtl":v},"PinBetterSave_Button--repin-flow"),O=a()("PinBetterSave__Button",{"PinBetterSave__Button--rtl":v,"PinBetterSave__Button--lego-pin":"pin"===f},"PinBetterSave__Button--lego");return Object(r.jsx)(u,{dropdownClasses:a()("PinBetterSave__Dropdown","PinBetterSave__Dropdown--lego",{"PinBetterSave__Dropdown--rtl":v,"PinBetterSave__Dropdown--lego-pin":"pin"===f,"PinBetterSave__Dropdown--lego-closeup":"closeup"===f,"PinBetterSave__Dropdown--expandedLego":!l}),dropdownRef:t,onBoardDropdownClick:n,onSaveClick:i,renderPinSaveTooltip:s,saveButtonClasses:m?x:O,saveButtonRef:j,showSaveButton:l,textColor:c?"darkGray":"gray",title:g,hideDropdown:m})}var b=n("clxp"),f=n("1inl"),m=n("ajUs"),v=n("a49R");class j extends o.Component{constructor(...e){var t,n,r;super(...e),r=()=>{const{setActive:e,showOnTopOfModal:t,...n}=this.props;e("flyout",n,t||!1)},(n="renderFlyout")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}componentDidMount(){this.renderFlyout()}componentDidUpdate(){this.renderFlyout()}componentWillUnmount(){this.props.setActive()}render(){return null}}const g=e=>Object(r.jsx)(v.a.Consumer,{children:t=>Object(r.jsx)(j,{...e,setActive:t})});g.displayName="MasonryFlyout";var x=g,O=n("juJw"),y=n("qD10"),_=n("eOdZ"),S=n("lm6u");function w(e){const{action:t,additionalCreateFields:n,boardWithSection:i,children:s,onClose:a,pin:c,setCompletionPromise:d,showModal:l}=e,u=((e,t)=>{const[n,r]=Object(o.useState)([]);return Object(o.useEffect)(()=>{let n=!1;return e&&_.a.create("SectionRecommendationsResource",{pinIds:[t]}).callGet().then(e=>{var t;if(n)return;const o=null==e||null===(t=e.resource_response)||void 0===t?void 0:t.data;r(o.length>0&&o[0]||[])}),()=>{n=!0}},[e,t]),n})(l,c.id);return Object(r.jsx)(S.a,{additionalCreateFields:n,boardWithSection:i,action:t,hideSuccessAnimation:!!u.length,onClose:a,setCompletionPromise:d,showCreate:!0,shouldShowToast:!u.length,pin:c,children:e=>s({...e,sectionSuggestions:u})})}var I=n("M1Uz"),C=n("vvax");function B({boardName:e,pinImageUrl:t,onHide:n,onUndo:o}){return Object(r.jsx)(I.a,{duration:3e3,imageUrl:t,onHide:n,text:Object(r.jsx)(l.U,{size:"md",truncate:!0,children:Object(C.b)(c.a._("Saved to {{ destination }}","PostSavedPinToast.SavedToBoardLabel","Saved to label for better save"),{destination:Object(r.jsx)(l.U,{size:"md",weight:"bold",children:e},"PostSavedPinToastBoardName")})}),button:o&&Object(r.jsx)(l.f,{inline:!0,text:c.a._("Undo","PostSavedPinToast.UndoButton","Undo Saved Pin"),size:"lg",onClick:o},"button-key")})}var D=n("uyxo"),E=n("Sp3T"),R=n("v/Q4"),T=n("e3KR"),P=n("Wrea"),k=n("0zyx"),A=n("TN0d"),L=n("EuRG"),U=n("H/Lk"),M=n("WnNx"),N=n("U4JR"),H=n("NjDU"),z=n("QAzJ"),F=n("B6Tf"),G=n("e0nq");class W extends o.PureComponent{constructor(...e){var t,n,r;super(...e),r=()=>{const{boardId:e}=this.props;Object(N.b)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return Object(r.jsx)(I.a,{duration:5e3,onHide:n,text:Object(C.b)(c.a._("Find more ideas for {{ boardName }}"),{boardName:e}).join(""),href:t+"more_ideas/?ideas_referrer=16",onClick:this.handleClick})}}var q=Object(i.connect)(null,(e,t)=>({toastShown:()=>e(Object(G.c)(t.boardId))}))(W),K=n("w70y"),V=n("ZdPf"),Q=n("seP0"),Z=n("nGHF"),Y=n("0nTG"),X=n("EC67");function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J({savedInfo:e,variant:t,shouldUseLegoStyles:n}){const o="closeup"===t,i=o?"sm":"md";return Object(r.jsx)(y.a,{className:"underlineLink",stopPropagation:!0,style:{color:"#333"},to:e.url||"",children:Object(r.jsx)(l.e,{marginStart:o?1:0,children:n?Object(r.jsx)(l.U,{color:"darkGray",size:"lg",weight:"bold",children:e.title.length<=8?e.title:Object(O.a)(e.title,8)}):Object(r.jsx)(l.U,{color:"darkGray",inline:!0,size:i,children:Object(C.b)(c.a._("Saved to {{ destination }}","Saved to label for better save","Saved to label for better save"),{destination:Object(r.jsx)(l.U,{color:"darkGray",size:i,truncate:!0,weight:"bold",inline:!0,children:e.title.length<=30?e.title:Object(O.a)(e.title,30)},"pin_auto_save_link")})})})})}class ee extends o.Component{constructor(...e){var t;super(...e),t=this,$(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),$(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:r,url:o}}=e,i={boardId:n,title:r,url:o};this.updateSelectedBoardOrSection(i),this.updateSavedState({...i,localPinId:e.id}),t&&Object(V.d)(t.sensitivity)&&Object(V.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),$(this,"updateSavedState",e=>{const{reduxLocation:t,save:n,searchQueryInvalidated:r,onSave:o,pin:{id:i}}=this.props,s=t.query&&t.query.q||Object(k.a)(t.history);n({pinId:i,...e}),s&&r(s),o&&o()}),$(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),$(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),$(this,"dropdownRef",Object(o.createRef)()),$(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),$(this,"handleBoardCreate",({title:e=""}={})=>this.props.requireAuth(()=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),$(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),$(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),$(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n,location:{pathname:r},boardPickerStopwatch:o}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(N.b)(101,{component:13282,element:10960,viewParameter:n,objectId:t}),o&&(o.start(),Object(Q.b)(o,r)),this.showFlyout())}),$(this,"handleSaveClick",(async function(e){const{selectedItem:n}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(N.b)(101,{component:13282,element:36,objectId:n.boardId,grid_index:4}),await t.save(n)):t.handleBoardDropdownClick(e)})),$(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),$(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:r})=>{const{pin:{id:o},savedInfo:{localPinId:i}={}}=this.props;this.updateSavedState({pinId:o,localPinId:i,boardId:e,sectionId:t||"",url:n,title:r})}),$(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),$(this,"deleteSavedState",()=>{const{unsave:e,onDelete:t,pin:{id:n}}=this.props;e({pinId:n}),t&&t()}),$(this,"save",(async function(e){const{isLimitedLogin:n,mostRecentBoard:o,pin:{id:i},postRepinMoreIdeasUpsell:s,postRepinUpsellDisabled:a,save:c,setMostRecentBoard:d,showRepinAnimation:l,toastManagerContext:u,shouldUseLegoStyles:h}=t.props;t.updateSavedState(e);try{const{resource_response:{data:n}}=await t.getPinResource(e).callCreate({showError:!1}),p=e.url,{incrementBoardPinCount:b,updateUserPinCount:f,viewerUserId:m}=t.props;if(!a&&p&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:r,recentUpsell:o}=n;if(o[e])return!1;const i=r.findIndex(t=>t.boardId!==e);return(-1===i?r.length:i)+1>=3})({boardId:e.boardId,boardUrl:p,postRepinMoreIdeasUpsell:s})&&u.showToast(({onHide:t})=>Object(r.jsx)(q,{boardId:e.boardId,boardName:e.title,boardUrl:p,onHide:t})),c({pinId:i,...{...e,localPinId:n.id}}),A.b.publish("currentUser","pinCreated",n),A.b.publish(n.board.id,"pinCreated",{pin:n}),b({boardId:e.boardId,sectionId:e.sectionId}),f(m),h){const{images:e,board:o}=n,i=e["236x"];u.showToast(({onHide:e})=>Object(r.jsx)(B,{pinImageUrl:i.url,boardName:o.name,onHide:e,onUndo:t.deleteSavedState}))}else l(i);o&&e.boardId!==o.id&&d(e.boardId,e.title,e.url)}catch(p){n||f.a.showError(p.message_detail||p.message),t.resetPinSavedState()}})),$(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(){this.updateSelectedItem()}getPinResource(e){const{carouselData:t,location:n,previousHistory:r,pin:o}=this.props,i=t&&t.index,s=Object(m.a)(o,n,r)||o.tracking_params+"~0",a={description:o.description||"",link:o.link,title:o.title||"",clientTrackingParams:s,board_id:e.boardId||"",pin_id:o.id||"",image_base64:o.image_base64,is_buyable_pin:!1,is_removable:o.promoted_is_removable,carousel_slot_index:i||0,...e.sectionId?{section:e.sectionId}:{},...Object(Y.f)(o)||{}};return _.a.create("RepinResource",a)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,carouselData:t,onToggleModal:n,pin:o,renderPinSaveTooltip:i,renderSavedStatus:s,savedInfo:a,selectedItem:c,unselectedText:d,useMasonryFlyout:u,variant:h,viewParameter:f,isInWebRepinFlowExp:m,hideDropdown:v,shouldUseLegoStyles:j}=this.props,{boardWithSection:g,showBoardFlyout:O,showRepinModal:y,sensitiveContentNotice:_,suggestedBoardTitle:S}=this.state,I=u?x:l.r,C=Object(r.jsx)(T.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:o});return Object(r.jsx)(b.a,{name:"PinBetterSave",children:Object(r.jsxs)(l.e,{width:"100%",display:"closeup"===h?"flex":void 0,height:j?48:"closeup"===h?44:void 0,color:j||"closeup"!==h?void 0:"lightGray",rounding:j||"closeup"!==h?void 0:4,children:[(null==a?void 0:a.title)?Object(r.jsx)(D.a,{currentCarouselIndex:t&&t.index,onDeleteSavedState:this.deleteSavedState,onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:a.localPinId,variant:h,viewParameter:f,shouldUseLegoStyles:j,children:s&&a&&s({savedInfo:a,variant:h,shouldUseLegoStyles:j})}):Object(r.jsx)(p,{dropdownRef:this.dropdownRef,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:this.handleSaveClick,renderPinSaveTooltip:i,selectedTitle:c&&c.title,showSaveButton:!O,unselectedText:d,view:h,hideDropdown:v,shouldUseLegoStyles:j}),Object(r.jsx)(w,{additionalCreateFields:{is_stl_pin:Object(Y.i)(o)},boardWithSection:g,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showModal:y,pin:o,children:({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:o,handleNewBoardAnimationCompletion:i,handleSocialConnectSet:s,handleSaveToBoard:a,newPin:c,updateDescription:d,modalTitle:l,sectionSuggestions:u,setModalTitle:h,pin:p})=>Object(r.jsx)(F.d,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:o,handleNewBoardAnimationCompletion:i,handleSocialConnectSet:s,handleSaveToBoard:a,updateDescription:d,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:_,pin:p,pwtAuxData:{pin_create_method:"repin"},sectionSuggestions:u,suggestedBoardTitle:S,boardWithSection:g,shouldRenderContent:y,newPin:c,modalTitle:l,setModalTitle:h,showCreate:!0})}),O&&"closeup"===h&&Object(r.jsx)(l.r,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,size:m?"xl":"lg",children:C}),O&&"pin"===h&&Object(r.jsx)(I,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!u,size:m?"xl":"lg",children:C})]})})}}$(ee,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t,shouldUseLegoStyles:n})=>Object(r.jsx)(J,{savedInfo:e,variant:t,shouldUseLegoStyles:n})});t.default=Object(o.memo)((function(e){var t;const{pin:{id:n}}=e,o=Object(K.a)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),s=Object(K.a)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5}}),a=Object(X.g)(),d=Object(X.h)(),u=Object(Z.b)(),h=Object(Q.c)(),p=Object(R.a)(),b=Object(i.useDispatch)(),f=Object(E.a)(),{anyEnabled:m}=Object(z.a)("web_repin_flow"),v=Object(i.useSelector)(({mostRecentBoard:e})=>e),j=Object(i.useSelector)(({pins:e})=>e[n]),g=Object(i.useSelector)(({history:e})=>e.previous),x=Object(i.useSelector)(({location:e})=>e),O=Object(i.useSelector)(({ui:e})=>e.postRepinMoreIdeasUpsell);let y=e.initialSelection,_=(null===(t=y)||void 0===t?void 0:t.title)||"",S=!0;if(!y){const e=s&&s.data&&s.data[0];y=s&&s.isLoaded&&e&&{boardId:e.id,title:e.name,url:e.url}||s&&s.isLoaded&&!e&&v&&{boardId:v.id,title:v.name,url:v.url}||void 0,_=s&&s.isLoaded?c.a._("Select","BetterSave label to pick a board from the list","BetterSave label to pick a board from the list"):"...",S=!1}return Object(r.jsx)(l.e,{overflow:"hidden",children:Object(r.jsx)(ee,{...e,boardResource:o,boardPickerStopwatch:h,carouselData:j&&j.carousel_data,history:a,incrementBoardPinCount:({boardId:e,sectionId:t})=>b(Object(P.d)({boardId:e,sectionId:t,increment:1})),initialSelection:y,isLimitedLogin:p.isLimitedLogin,location:d,mostRecentBoard:v,postRepinMoreIdeasUpsell:O,postRepinUpsellDisabled:S,previousHistory:g,reduxLocation:x,requireAuth:f,save:e=>b(Object(G.a)(e)),savedInfo:j&&j.savedInfo,searchQueryInvalidated:e=>b(Object(L.b)(e)),selectBoardOrSection:e=>b(Object(G.b)(e)),selectedItem:j&&j.selectedItem,setMostRecentBoard:(e,t,n)=>b(Object(U.a)(e,t,n)),showRepinAnimation:e=>b(Object(M.b)(e)),toastManagerContext:u,unsave:e=>b(Object(G.d)(e)),unselectedText:_,updateUserPinCount:e=>b(Object(H.b)({userId:e,increment:1})),viewerUserId:p.isAuth?p.id:"",isInWebRepinFlowExp:m})})}))},gONw:function(e,t,n){var r=n("nKUr"),o=n("q1tI"),i=n("n6mq");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends o.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"onHover",()=>{this.setState({isHovering:!0})}),s(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:n,inFlyoutExp:o}=this.props;return o?Object(r.jsxs)(i.e,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[Object(r.jsx)(i.e,{children:Object(r.jsx)(i.B,{height:40,width:40,rounding:2,children:this.state.isHovering&&n?Object(r.jsx)(i.w,{alt:"",color:"",fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url}):Object(r.jsx)(i.e,{color:"lightGray",height:40,width:40})})}),Object(r.jsx)(i.e,{padding:2,children:Object(r.jsx)(i.t,{size:"sm",children:e})})]}):Object(r.jsxs)(i.e,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[Object(r.jsx)(i.e,{children:Object(r.jsx)(i.u,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})}),Object(r.jsx)(i.e,{marginStart:3,children:Object(r.jsx)(i.U,{color:t?"darkGray":"gray",weight:"bold",children:e})})]})}}var c=n("Ye/N"),d=n("w70y"),l=n("U4JR"),u=n("seP0");t.a=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:n,image:s,minHeight:h,onBoardSelected:p})=>{const[b,f]=Object(o.useState)(-1),m=Object(u.c)(),{data:v=[],error:j,isLoaded:g}=Object(d.a)({name:"BoardTitleSuggestionsResource",options:{pin_id:n}}),x=(O=v,Object(o.useMemo)(()=>O&&O.length?O.map(e=>e.title):[],[O]));var O;Object(o.useEffect)(()=>{g&&t&&m&&(j?m.error():m.stop())},[g]);const y=()=>{f(-1)},_=(t,n)=>{const o=b===n;return Object(r.jsx)("li",{children:Object(r.jsx)(i.T,{onMouseEnter:()=>(e=>{f(e)})(n),onMouseLeave:y,onTap:()=>(e=>{p(x[e],!1),Object(l.b)(101,{component:13025,element:23})})(n),children:Object(r.jsx)(a,{selected:o,name:t,inFlyoutExp:e,image:s})})},n)};return g?x&&x.length?e?Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:x.map(_)})}):t?Object(r.jsxs)(i.e,{children:[Object(r.jsx)(i.e,{marginTop:5,marginStart:6,marginBottom:3,children:Object(r.jsx)(i.U,{children:c.a._("Suggested board names","text above suggested board names list","text above suggested board names list")})}),Object(r.jsx)("ul",{children:x.map(_)})]}):Object(r.jsxs)(i.e,{children:[Object(r.jsx)(i.e,{marginTop:2,paddingX:5,children:Object(r.jsx)(i.U,{children:c.a._("Suggested board names")})}),Object(r.jsx)("ul",{children:x.map(_)})]}):null:Object(r.jsx)(i.e,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:h||"",children:Object(r.jsx)(i.O,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0})})}},gdcG:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("nKUr"),o=n("2WXK");function i(e){return function(t){const{isHovering:n,hoverHandlers:i}=Object(o.a)();return Object(r.jsx)(e,{...t,hoverHandlers:i,isHovering:n})}}},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return a}));var r=n("nKUr"),o=n("Ye/N"),i=n("dtqy"),s=n("n6mq");function a({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:i,wrappingIconStyle:a,shouldUseLegoStyles:c,onDelete:d}){const l=Object(r.jsx)(s.v,{accessibilityLabel:o.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return c?Object(r.jsx)(s.f,{size:"lg",color:"gray",text:o.a._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:d,accessibilityLabel:o.a._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||i?Object(r.jsx)("div",{style:{...a||{}},children:l}):l}t.default=Object(i.a)(a)},jdx6:function(e,t,n){n.d(t,"b",(function(){return c}));var r=n("nKUr"),o=n("8cMa"),i=n("JW66"),s=n("Ye/N"),a=n("n6mq");function c(e,t){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,o,i)=>{if(n.length>0&&e&&e.length){const s=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(Object(r.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(s,s+e.length)},i),o)}return[o]},[]):t}t.a=function(e){const{disabled:t,item:n,isSection:d,isSelectMode:l,isWithinSectionPicker:u,saveState:h,searchQuery:p,selected:b}=e,f=d?null:n,m=d?n:null,v=m&&m.title||f&&f.name||"";let j="",g=!1,x="",O=0;f&&({image_cover_url:j,is_collaborative:g,privacy:x,section_count:O=0}=f);const y=c(p,v),_=x===i.a.BoardPrivacy.SECRET,S=!t&&(b||!!h),w=!u&&O>0,I=O>0?"boardWithSection":"boardWithoutSection",C=l?s.a._("Select","Board select button label","Board select button label"):s.a._("Save","Pin save button label","Pin save button label");return Object(r.jsxs)(a.e,{alignItems:"center",color:S?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":I,children:[f?Object(r.jsx)(a.e,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none",children:j?Object(r.jsx)(a.w,{src:j,alt:v,fit:"cover",naturalWidth:1,naturalHeight:1}):Object(r.jsx)("span",{})}):Object(r.jsx)(a.e,{height:36,paddingX:2}),Object(r.jsxs)(a.e,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow",children:[Object(r.jsx)(a.U,{color:t?"gray":"darkGray",size:"md",truncate:!0,weight:"bold",children:y}),(w||!S)&&Object(r.jsxs)(a.e,{alignItems:"center",display:"flex",children:[_&&Object(r.jsx)(o.a,{type:"secret"}),g&&Object(r.jsx)(o.a,{type:"group"}),w&&Object(r.jsx)(o.a,{type:"sections"})]}),!w&&S&&!h&&Object(r.jsxs)(a.e,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:[!l&&Object(r.jsx)(a.e,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}},children:Object(r.jsx)(a.u,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})}),Object(r.jsx)(a.U,{color:"white",overflow:"normal",size:"md",weight:"bold",children:C})]}),!w&&S&&"loading"===h&&Object(r.jsx)(a.e,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:Object(r.jsx)(a.O,{accessibilityLabel:s.a._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0})})]})]})}},juJw:function(e,t,n){t.a=(e,t)=>e.length>t?e.substr(0,t-3)+"…":e},l9OW:function(e,t,n){var r=n("SKAX"),o=n("MMmD");e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},"lm/5":function(e,t,n){var r=n("fmRc"),o=n("wF/u");e.exports=function(e,t,n,i){var s=n.length,a=s,c=!i;if(null==e)return!a;for(e=Object(e);s--;){var d=n[s];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<a;){var l=(d=n[s])[0],u=e[l],h=d[1];if(c&&d[2]){if(void 0===u&&!(l in e))return!1}else{var p=new r;if(i)var b=i(u,h,l,e,t,p);if(!(void 0===b?o(h,u,3,i,p):b))return!1}}return!0}},mEMi:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("q1tI"),o=n("DzJC"),i=n.n(o);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends r.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",e=>{this.containerRef=e}),s(this,"fetchMoreIfNecessary",i()(()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:n},r)=>e+t+(r?r(t):2*t)>n)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},"mVx/":function(e,t,n){var r=n("XKAG")(n("JELi"));e.exports=r},oN2T:function(e,t,n){n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return j})),n.d(t,"m",(function(){return g})),n.d(t,"h",(function(){return O})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return _})),n.d(t,"l",(function(){return S})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return I})),n.d(t,"f",(function(){return C}));var r=n("4dcN"),o=n("Pqnw"),i=n("7w6Q"),s=n("eOdZ"),a=n("KFEb"),c=n("5FNA"),d=n("NjDU"),l=n("Wer7");const u="board_create",h="board_delete",p="board_edit";function b(e,t){return Object(l.a)("BoardResource",{board_id:e,field_set_key:t})}function f(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}function m(){return(e,t)=>{const{viewer:n}=t();n.isAuth&&Object(c.b)(n.username).forEach(t=>{e(t)})}}function v(e,t){const n={...e};return o=>(o({type:"BOARD_CREATE",payload:{board:e}}),s.a.create("BoardResource",n).callCreate().then(e=>{r.a.trackEvent(u,"success");const i=e.resource_response.data;return i&&(o(m()),(null==t?void 0:t.isFBC)||o(f(n,i))),i}).catch(e=>{throw r.a.trackEvent(u,"error"),e}))}function j(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function g(e){return t=>{const n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},o={board_id:e.id,name:e.name,description:e.description,category:e.category,collaborator_permissions_setting:e.collaborator_permissions_setting,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...n};return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:o}}),s.a.create("BoardResource",o).callUpdate().then(n=>{r.a.trackEvent(p,"success");const i=n&&n.resource_response&&n.resource_response.data||e;t(j(o,i))}).catch(e=>{throw r.a.trackEvent(p,"error"),e})}}function x(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function O(e){return(t,n)=>{const o=n().boards.content[e],{pin_count:i}=o,{id:a}=o.owner;return t({type:"BOARD_DELETE",payload:{boardId:e}}),s.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{r.a.trackEvent(h,"error"),t(x(e)),t(Object(d.b)({userId:a,increment:-i}))}).catch(e=>{throw r.a.trackEvent(h,"error"),e})}}function y(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function _(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),s.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function S(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),s.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function w(e,t){return n=>s.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([n(x(e)),n(b(t,"pin_count")),n(Object(o.a)(a.a.BOARD_SECTIONS,t))]))}function I(e,t){return n=>s.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response){return n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}const r=e.resource_response.data||{},o=(r.model||{}).custom_properties||{},{campaign_id:s="unknown"}=o,a=r.display_data||{},c={isSocialSeasonalBoard:!!r.display_data,socialHeaderBgImage:a.header_image,socialHeaderBgColor:a.header_background_color,textIconColor:a.text_icon_color};return i.a.increment(`web.seasonal_board.${s}.${t}.land`),n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:c})})}function C(){return e=>e({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}},oRM1:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("q1tI"),o=n("zQfT");function i({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:n,resourceName:i,resourceOptions:s,value:a}){const c=Object(o.a)({allowSearchOnMount:e,resourceName:i,resourceOptions:s,value:a});return Object(r.useEffect)(()=>{c.length&&n(c)},[c]),t||null}},ou9u:function(e,t,n){function r(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}n.d(t,"a",(function(){return r}))},qyR9:function(e,t,n){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return j}));var r=n("nKUr"),o=n("q1tI"),i=n("jdx6"),s=n("gONw"),a=n("Ye/N"),c=n("gdcG"),d=n("n6mq");var l=Object(c.a)((function(e){const{buttonLabel:t,isHovering:n,isRowItem:o,hasHoverState:i,hoverHandlers:s,name:c,onClick:l}=e,u=c||t||a.a._("Create board");return Object(r.jsx)(d.T,{onMouseEnter:s.onMouseOver,onMouseLeave:s.onMouseLeave,onTap:l,children:Object(r.jsxs)(d.e,{alignItems:"center",color:i&&n?"lightGray":"white",display:"flex",flex:o?"shrink":"none",height:64,width:"100%",children:[Object(r.jsx)(d.e,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton",children:Object(r.jsx)(d.u,{accessibilityLabel:a.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})}),c?Object(r.jsx)(d.e,{margin:1,children:Object(r.jsxs)(d.U,{inline:!0,overflow:"normal",children:[" ",a.a._("Create: ")," "]})}):null,Object(r.jsxs)(d.U,{align:"center",inline:!0,truncate:!0,weight:"bold",children:[" ",u," "]})]})})})),u=n("9QW3"),h=n("NdQN"),p=n("IBrh"),b=n("seP0");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=2;class v extends o.Component{constructor(...e){super(...e),f(this,"state",{searchQuery:""}),f(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})}),f(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),f(this,"renderSectionHeader",(e,t)=>e.title?Object(r.jsxs)(d.e,{children:[t>0&&Object(r.jsx)(d.o,{}),Object(r.jsx)(d.e,{paddingX:3,paddingY:1,children:Object(r.jsx)(d.U,{size:"md",children:e.title})})]}):null),f(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:o,isSelectMode:s,disabledRowId:a}=this.props,{searchQuery:c}=this.state,{inSectionSelection:d=!1}=n,l=o&&o.board===e.id?o&&o.state:null,u="board_section"===e.type;return Object(r.jsx)(i.a,{isSelectMode:s,disabled:e.id===a&&d,item:e,isSection:u,isWithinSectionPicker:d,saveState:l,searchQuery:c,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:o,isLoaded:i,onCreate:c,pinId:b}=this.props;if(i){const{searchQuery:i}=this.state,a=o(i);return this.indexManager=new u.a(a.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),Object(r.jsxs)(d.e,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!n&&Object(r.jsxs)(d.e,{children:[Object(r.jsx)(d.e,{paddingX:3,marginBottom:4,marginTop:1,children:Object(r.jsx)(h.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:i})}),Object(r.jsx)(d.o,{})]}),Object(r.jsx)(p.a,{disabled:!!e,grow:!n&&!i,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:a}),Object(r.jsx)(d.o,{}),c&&Object(r.jsx)(l,{buttonLabel:t,hasHoverState:!0,name:i,onClick:()=>c(i)}),n&&c&&b&&Object(r.jsx)(s.a,{onBoardSelected:c,pinId:b})]})}return Object(r.jsx)(d.e,{paddingY:5,children:Object(r.jsx)(d.O,{accessibilityLabel:a.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0})})}}function j(e){const t=Object(b.c)();return Object(r.jsx)(v,{...e,boardPickerStopwatch:t})}},r8eU:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n("QLaP"),o=n.n(r);class i{constructor(e,t){o()(e,"You must pass a requestContext to check an Experiment"),o()(t,"You must pass the name of the experiment to check"),this.requestContext=e,this.experimentName=t.toLowerCase()}_isSeoExperiment(){return this.experimentName.startsWith("seo_")}_getGroup(e){return this.requestContext.isBot?this._isSeoExperiment()&&this.requestContext.seoExperiments.v2GetSEOGroup(this.experimentName)||"":this._isSeoExperiment()?e?"":this.requestContext.seoExperiments.v2GetSEOGroup(this.experimentName)||"":e?this.requestContext.experiments.v2ActivateExperiment(this.experimentName)||"":this.requestContext.experiments.v2GetGroup(this.experimentName)||""}}class s extends i{getGroup(e=!1){return this._getGroup(e)}}class a extends i{_isTreatment(e){return e.startsWith("enabled")||e.startsWith("employee")}enabled(){return this._isTreatment(this._getGroup(!0))}enabledWithNoActivation(){return this._isTreatment(this._getGroup(!1))}}},s7xj:function(e,t,n){n.d(t,"a",(function(){return u}));var r=n("nKUr"),o=n("8Mj5"),i=n("xweI"),s=n.n(i),a=n("v/Q4"),c=n("QKYm");function d(e,t,n){const{collaborated_by_me:r,collaborating_users:o=[],owner:i}=e,a=[i];if(r||n){const e=o.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){const t=o.splice(e,1)[0];a.push(t)}else a.push(t)}const d=c.a-a.length,l=s()(o,"full_name").slice(0,d);return[...a,...l]}function l(e){var t,n;return{href:"/"+e.username,key:e.id,name:null!==(t=e.fullName)&&void 0!==t?t:e.full_name,src:null!==(n=e.imageMediumUrl)&&void 0!==n?n:e.image_medium_url}}function u({board:e,forceViewer:t,isCompact:n,ownerOnly:i}){const s=Object(a.a)();return Object(r.jsx)(o.a,{faces:i?[l(e.owner)]:d(e,s,t).map(l),faceSize:n?"xs":"sm",overlap:n?-3:-4})}},seP0:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d}));var r=n("FZ8N"),o=n("F4HH");const{Provider:i,useHook:s}=Object(o.a)({name:"board_picker",v2LoggerMetricName:16,sampleRate:r.b?1:.1}),a=(e,t)=>{let n="unknown";(null==t?void 0:t.includes("pin/"))?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},c=i,d=s},"ut/Y":function(e,t,n){var r=n("ZCpW"),o=n("GDhZ"),i=n("zZ0H"),s=n("Z0cm"),a=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?o(e[0],e[1]):r(e):a(e)}},uyxo:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("nKUr"),o=n("jHGc"),i=n("n6mq");function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:s,onEditSubmit:a,onToggleModal:c,pinId:d,variant:l,viewParameter:u,shouldUseLegoStyles:h}=e,p="pin"===l?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return Object(r.jsxs)(i.e,{display:"flex",direction:"row",alignItems:"center",width:"closeup"===l?"100%":void 0,paddingX:"closeup"!==l||h?void 0:2,marginStart:"pin"===l?-1:void 0,marginEnd:"pin"===l?-1:void 0,children:[t&&Object(r.jsx)(i.e,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),Object(r.jsx)(i.e,{paddingX:1,flex:"none",marginStart:"auto",children:Object(r.jsx)(o.default,{component:0,onDelete:s,onSubmit:a,pinId:d,onToggleModal:c,viewParameter:u,carouselSlotCurrentIndex:n,style:p,shouldUseLegoStyles:h,useLegoStyles:"pin"===l})})]})}},xweI:function(e,t,n){var r=n("XGnz"),o=n("alwl"),i=n("EA7m"),s=n("mv/X"),a=i((function(e,t){if(null==e)return[];var n=t.length;return n>1&&s(e,t[0],t[1])?t=[]:n>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=a},yKES:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("nKUr"),o=n("Ye/N"),i=n("US8k"),s=n("n6mq");function a({duration:e}){return Object(r.jsxs)(s.e,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[Object(r.jsx)(s.u,{accessibilityLabel:o.a._("Video camera icon","Video camera indicator icon for a Pin","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),Object(r.jsx)(s.e,{marginStart:1,children:Object(r.jsx)(s.U,{color:"white",size:"sm",truncate:!0,children:Object(i.a)(e)})})]})}},yue5:function(e,t,n){var r=n("/9aa");e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,i=e==e,s=r(e),a=void 0!==t,c=null===t,d=t==t,l=r(t);if(!c&&!l&&!s&&e>t||s&&a&&d&&!c&&!l||o&&a&&d||!n&&d||!i)return 1;if(!o&&!s&&!l&&e<t||l&&n&&i&&!o&&!s||c&&n&&i||!a&&i||!d)return-1}return 0}},zQfT:function(e,t,n){n.d(t,"a",(function(){return d}));var r=n("q1tI");const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},i=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};i.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},i.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},i.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},i.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},i.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var s=i,a=n("eOdZ");function c({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},r=a.a.create(e,n),o=new s,i=()=>{r.abort()};return async function(e){const t=o.get(e);if(t){const n=t.items;if(n&&n.length){i();return{hint:t.hint,items:n,term:e}}}return e.length>=0?(async e=>{if(r.isCalling()){var t;if(e===(null===(t=r.options)||void 0===t?void 0:t.term))return;i()}const{bookmarks:n,...s}=r.options||{};r.options={...s,term:e};const a=(await r.callGet({showError:!1})).resource_response.data,c=a.items,d=a.hint||{},l={hint:d,items:c};return o.set(e,l),{term:e,items:c,hint:d}})(e):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:o}){const i=Object(r.useRef)(!1),s=Object(r.useRef)({}),[a,d]=Object(r.useState)([]),l=function({resourceName:e,resourceOptions:t}){const n=Object(r.useRef)();return n.current||(n.current=c({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n});return Object(r.useEffect)(()=>{(async()=>{if(null!=o&&(e||i.current))if(o in s.current)d(s.current[o]);else try{const e=await l(o);if(e){const{items:t}=e;s.current[o]=t,d(t)}}catch(t){if("Resource call aborted"===t)return;throw t}i.current||(i.current=!0)})()},[o]),a}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/PinBetterSaveCommon-6edcaf306de7ab1112f7.mjs.map