(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["www/pin/[id]/visual-search-authdesktop",276,471],{"+wdc":function(e,t,n){var r,i,o,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,l=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(n){throw setTimeout(l,0),n}},d=Date.now();t.unstable_now=function(){return Date.now()-d},r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(l,0))},i=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var p=window.performance,f=window.Date,h=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var b=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof p&&"function"==typeof p.now)t.unstable_now=function(){return p.now()};else{var v=f.now();t.unstable_now=function(){return f.now()-v}}var g=!1,y=null,_=-1,x=5,j=0;a=function(){return t.unstable_now()>=j},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,O=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();j=e+x;try{y(!0,e)?O.postMessage(null):(g=!1,y=null)}catch(n){throw O.postMessage(null),n}}else g=!1},r=function(e){y=e,g||(g=!0,O.postMessage(null))},i=function(e,n){_=h((function(){e(t.unstable_now())}),n)},o=function(){m(_),_=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,c=e[s];if(void 0!==a&&0>I(a,n))void 0!==c&&0>I(c,a)?(e[r]=c,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==c&&0>I(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],k=[],R=1,A=null,P=3,L=!1,D=!1,U=!1;function M(e){for(var t=C(k);null!==t;){if(null===t.callback)S(k);else{if(!(t.startTime<=e))break;S(k),t.sortIndex=t.expirationTime,E(T,t)}t=C(k)}}function F(e){if(U=!1,M(e),!D)if(null!==C(T))D=!0,r(N);else{var t=C(k);null!==t&&i(F,t.startTime-e)}}function N(e,n){D=!1,U&&(U=!1,o()),L=!0;var r=P;try{for(M(n),A=C(T);null!==A&&(!(A.expirationTime>n)||e&&!a());){var s=A.callback;if(null!==s){A.callback=null,P=A.priorityLevel;var c=s(A.expirationTime<=n);n=t.unstable_now(),"function"==typeof c?A.callback=c:A===C(T)&&S(T),M(n)}else S(T);A=C(T)}if(null!==A)var u=!0;else{var l=C(k);null!==l&&i(F,l.startTime-n),u=!1}return u}finally{A=null,P=r,L=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||L||(D=!0,r(N))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return C(T)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=q,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var c=a.delay;c="number"==typeof c&&0<c?s+c:s,a="number"==typeof a.timeout?a.timeout:B(e)}else a=B(e),c=s;return e={id:R++,callback:n,priorityLevel:e,startTime:c,expirationTime:a=c+a,sortIndex:-1},c>s?(e.sortIndex=c,E(k,e),null===C(T)&&e===C(k)&&(U?o():U=!0,i(F,c-s))):(e.sortIndex=a,E(T,e),D||L||(D=!0,r(N))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=C(T);return n!==A&&null!==A&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<A.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},"/X16":function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r={USER_FOLLOW:"USER_FOLLOW"},i={USER_BLOCK:"USER_BLOCK"}},"0rqB":function(e,t,n){n.d(t,"a",(function(){return l}));var r=n("nKUr"),i=n("q1tI"),o=n("clxp"),a=n("n6mq");function s({children:e,group:t,isEligible:n,name:i,performsActivate:o}){let s=o?"#0f0":"#00f";return n||(s="#999"),Object(r.jsxs)(a.e,{position:"relative",children:[e,Object(r.jsx)(a.e,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 2px 2px "+s,borderRadius:5}}}),Object(r.jsxs)(a.e,{position:"absolute",top:!0,left:!0,color:"lightGray",children:[i,": ",t]})]})}var c=n("NVsV");const u=Object(i.memo)(({activate:e=!0,activateExperiment:t,isEligible:n=!0,name:a,group:c,overrideGroup:u=null,highlighted:l=!1,children:d})=>{Object(i.useEffect)(()=>{e&&n&&t&&t(a)},[]);const p=()=>"string"==typeof u?u:c,f=p(),h=`Experiment(${a}:${f})`,m=n&&f&&(f.startsWith("enabled")||f.startsWith("employee"))||!1,b={group:n?f:"",anyEnabled:m,customActivate:n&&!e?()=>n?t(a):"":null};return(t=>{const i=p();return l?Object(r.jsx)(s,{group:i,isEligible:n,name:a,performsActivate:e,children:t}):t})(Object(r.jsx)(o.a,{name:h,children:d(b)}))});function l(e){const{name:t}=e,{debuggingEnabled:n,overriddenExperiments:o,highlightedExperiment:a,setExperimentVisible:s}=Object(i.useContext)(c.c),l=n&&o&&"string"==typeof o[t]?o[t]:null,d=n&&(a===t||a===c.a);return Object(i.useEffect)(()=>{if(n)return s(t,!0),()=>s(t,!1)},[t,n]),Object(r.jsx)(u,{...e,overrideGroup:l,highlighted:d})}},"16Al":function(e,t,n){var r=n("WbBG");function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},"1Vso":function(e,t,n){var r=n("nKUr"),i=n("7pfs");t.a=e=>{const{accessibilityLabel:t,children:n,className:o,dataTestId:a,onClick:s,onMouseEnter:c,onMouseLeave:u,style:l}=e;return Object(r.jsx)(i.a,{children:({active:e,focused:i,hovered:d,onBlur:p,onFocus:f,onMouseDown:h,onMouseEnter:m,onMouseLeave:b,onMouseUp:v})=>Object(r.jsx)("button",{"data-test-id":a,"aria-label":t,style:l,onBlur:p,onFocus:f,onMouseDown:h,onMouseEnter:e=>{m(),c&&c(e)},onMouseLeave:e=>{b(),u&&u(e)},onMouseUp:v,onClick:s,className:o,children:n({active:e,focused:i,hovered:d})})})}},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"7pfs":function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("q1tI");function i({children:e}){const[t,n]=Object(r.useState)(!1),[i,o]=Object(r.useState)(!1),[a,s]=Object(r.useState)(!1);return e({active:t,focused:i,hovered:a,onBlur:()=>{o(!1),n(!1)},onFocus:()=>o(!0),onMouseDown:()=>n(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>{s(!1),n(!1)},onMouseUp:()=>n(!1)})}},AP2z:function(e,t,n){var r=n("nmnc"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(c){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},BUdX:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("sErn"),i=n("+NLT"),o=n("jZXB");let a=null;const s={fromDesktopContextProps(e){const{context:t,context:{user:n={}}}=e;return{advertiser:t.advertiser?t.advertiser:null,country:t.country,deepLink:t.deep_link,experiments:e.experiments,fullPath:t.full_path,isAmp:!1,isAuthenticated:t.is_authenticated,isBot:"true"===t.is_bot,isSocialBot:!!t.social_bot,isManagedAdvertiser:t.is_managed_advertiser,isRTL:["ar"].includes(t.language),language:t.language,legacyAdvertiser:null,locale:t.locale,loginState:n.login_state||void 0,origin:t.origin,seoExperiments:e.seoExperiments,seoUnauthExperiments:e.seoUnauthExperiments,unauthId:t.unauth_id,userAgent:{browserName:t.browser_name,browserVersion:t.browser_version,canUseNativeApp:t.user_agent_can_use_native_app,isTablet:t.is_tablet_agent,isMobile:t.is_mobile_agent,isRetina:t.is_retina,platform:t.user_agent_platform,platformVersion:t.user_agent_platform_version&&3===t.user_agent_platform_version.length?t.user_agent_platform_version:[0,0,0],raw:t.user_agent}}},fromLegacyContext:e=>({advertiser:null,country:e.country,deepLink:e.deep_link,experiments:e.experiments,fullPath:e.full_path,isAmp:!1,isAuthenticated:e.is_authenticated,isBot:"true"===e.is_bot,isSocialBot:!!e.social_bot,isManagedAdvertiser:e.is_managed_advertiser,isRTL:["ar"].includes(e.language),language:e.language,legacyAdvertiser:e.advertiser?e.advertiser:null,locale:e.locale,loginState:e.user&&e.user.login_state||void 0,origin:e.origin,seoExperiments:e.experiments,seoUnauthExperiments:e.experiments,unauthId:e.unauth_id,userAgent:{browserName:e.browser_name,browserVersion:e.browser_version,canUseNativeApp:e.user_agent_can_use_native_app,isTablet:e.is_tablet_agent,isMobile:e.is_mobile_agent,isRetina:e.is_retina,platform:e.user_agent_platform,platformVersion:e.user_agent_platform_version||[0,0,0],raw:e.user_agent}}),fromGlobalContext(){if(a)return a;const e=s.fromDesktopContextProps({context:i.a.instance,...Object(r.a)(i.a.instance)});var t;return t=i.a.instance,0!==Object.keys(t).length&&(a=e),e},__private_static_provider_fallback_value:()=>({country:"US",deepLink:"",fullPath:"",isAmp:!1,isAuthenticated:!1,isBot:!1,isSocialBot:!1,isManagedAdvertiser:!1,isRTL:!1,language:"en",locale:"en-US",unauthId:"asdasda",origin:"https://example.com",userAgent:{browserName:"Chrome",browserVersion:"76.0.3809.132",platform:"OSX",platformVersion:[0,0,0],isTablet:!1,isMobile:!1,isRetina:!1,raw:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36"},experiments:new o.a,seoExperiments:new o.a,seoUnauthExperiments:new o.a,advertiser:null,legacyAdvertiser:null})}},E8d4:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("nKUr"),i=n("q1tI");class o extends i.Component{constructor(...e){var t,n,r;super(...e),r={errorIsCaught:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}componentDidCatch(){this.setState({errorIsCaught:!0})}render(){const{children:e}=this.props,{errorIsCaught:t}=this.state;return t?null:e}}function a({children:e,errorBoundaryName:t,fallback:n}){const a=n||null;return Object(r.jsx)(o,{...t?{name:t}:{},children:Object(r.jsx)(i.Suspense,{fallback:a,children:e})})}},EDqd:function(e,t,n){n.d(t,"a",(function(){return a}));const r=["236x","474x","564x","736x"];function i(e){function t(e,{imageKey:t,height:n,width:r}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:n,width:r}}}),e}const n=r.map((function(t){const n=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].height||1/0)),r=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].width||1/0));return{imageKey:t,height:n,width:r}}));return e.map(e=>n.reduce(t,e))}function o(e,t){return e.concat([{images:t&&t.canonical_images,image_signature:t&&t.image_signature}])}function a(e,t,n){const r=[{images:e}];return{carousel_slots:i((t&&t.additional_images).reduce(o,r)),index:n||0,id:t.id}}},ESls:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("nKUr"),i=n("0rqB"),o=n("pLLR");function a({activate:e,children:t,isEligible:n,name:a}){return Object(r.jsx)(o.b,{children:o=>Object(r.jsx)(i.a,{activate:e,activateExperiment:e=>o.experiments.v2ActivateExperiment(e)||"",group:o.experiments.v2GetGroup(a)||"",isEligible:n,name:a,children:t})})}},FDmi:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("nKUr"),i=n("n6mq");const o=(e,t)=>{const n=null==e?void 0:e.includes("images/user/default");return Boolean(n&&t)};function a({accessibilityLabel:e,name:t,outline:n,size:a,src:s,verified:c}){return Object(r.jsx)(i.b,{accessibilityLabel:e,name:t,outline:n,size:a,src:o(s,t)?void 0:s,verified:c})}},FylZ:function(e,t,n){function r(){let e="";for(let t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}n.d(t,"a",(function(){return r}))},GoyQ:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"Jr++":function(e,t,n){function r(e){null==e&&"undefined"!=typeof window&&(e=window.location.search);const t={};if(e){"?"===e[0]&&(e=e.substring(1));const n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){let t=e.replace(n," ");try{t=decodeURIComponent(t)}catch(r){t=unescape(t)}return t};let o=r.exec(e);for(;o;){const n=i(o[1]);"term_meta[]"===n?n in t?t[n].push(i(o[2])):t[n]=[i(o[2])]:t[n]=i(o[2]),o=r.exec(e)}}return t}n.d(t,"a",(function(){return r}))},KfNM:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},Kz5y:function(e,t,n){var r=n("WFqU"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},MUNL:function(e,t,n){n.r(t);var r=n("nKUr"),i=n("q1tI"),o=n("c0rk"),a=n("Taj8"),s=n("OBA1"),c=n("Ye/N"),u=n("R0ru"),l=n("82UD"),d=n("w70y"),p=n("yjg8"),f=n("n6mq");const h=({data:e,itemIdx:t})=>Object(r.jsx)(l.a,{pin:e,pinId:e.id,surface:"RelatedProductsFeed",trackingParameters:{slotIndex:t,viewParameter:3334,viewType:72}});function m({resourceOptions:e}){const t=Object(d.a)({name:"VisualLiveSearchProductFeedResource",options:e}),{data:n,isAtEnd:o,isLoaded:a,isFetching:s,fetchMore:l}=t,m=Object(i.useRef)(null);if(!a)return Object(r.jsx)(f.e,{display:"flex",alignSelf:"center",justifyContent:"center",children:Object(r.jsx)(f.O,{accessibilityLabel:c.a._("Loading related products","Label for loading spinner","Label for loading spinner"),show:!0})});const b=Array.isArray(n)?n:null==n?void 0:n.results;return Object(r.jsx)(f.e,{display:"flex",maxWidth:"100%",ref:m,children:b&&Object(r.jsx)(u.default,{columnWidth:p.e,comp:h,isAtEnd:o,isFetching:s,isLoaded:a,items:b,loadItems:()=>{s||o||l()},paddingStyle:"simplified",scrollContainer:()=>m.current||window})})}var b=n("AyyZ");class v extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=({data:e,itemIdx:t})=>{const{resourceOptions:{image_signature:n},visualLiveSearchResource:i}=this.props,o=i&&i.data&&i.data.search_identifier,a=`${window.location.pathname}products/${window.location.search}`;return"story"===e.type?Object(r.jsx)(b.a,{story:e,dangerouslySetActionUrl:a,slotIndex:t}):Object(r.jsx)(l.a,{pin:e,pinId:e.id,surface:"FlashlightResultGrid",trackingParameters:{contextLogData:{viewData:{search_identifier:o},search_identifier:o,image_signature:n},slotIndex:t,viewParameter:3050,viewType:72}})},(n="renderItem")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{visualLiveSearchResource:e,onSearchIdChange:t}=this.props,n=e&&e.data&&e.data.search_identifier;n&&t(n)}componentDidUpdate({visualLiveSearchResource:{data:e}}){const{visualLiveSearchResource:{data:t}}=this.props,n=t&&t.search_identifier,r=e&&e.search_identifier;n&&n!==r&&this.props.onSearchIdChange(n)}render(){const{visualLiveSearchResource:e}=this.props,{data:t,isFetching:n,fetchMore:i}=e,o=t&&t.results,a=t&&t.search_identifier;return Object(r.jsxs)(f.e,{children:[o&&a&&Object(r.jsx)(f.e,{children:Object(r.jsx)(f.C,{columnWidth:p.e,comp:this.renderItem,gutterWidth:p.d,items:o,loadItems:i,minCols:1,scrollContainer:()=>window})}),Object(r.jsx)(f.O,{accessibilityLabel:c.a._("Loading search results...","Accessibility label for loading visual search results","Accessibility label for loading visual search results"),show:n||!a})]})}}function g(e){const t=Object(d.a)({name:"VisualLiveSearchResource",options:e.resourceOptions});return Object(r.jsx)(v,{...e,visualLiveSearchResource:t})}var y=n("yNOO"),_=n("Q3yk"),x=n("Y+p1"),j=n.n(x),w=n("q8wg"),O=n("ANjH"),E=n("0Rm8"),C=n("U4JR"),S=n("uhAL"),I=n("pLLR"),T=n("EC67");function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let R=0,A="";class P extends i.Component{constructor(...e){super(...e),k(this,"state",{searchId:""}),k(this,"getResourceOptions",({pin:e,cropArea:t,width:n,height:r,cropSource:i})=>{const{id:o,image_signature:a}=e;return{pin_id:o,image_signature:a,crop:Object(S.d)({cropArea:t,scaledWidth:n,scaledHeight:r}),crop_source:i}}),k(this,"saveFlashlightImageContainerRef",e=>{this.flashlightImageContainerRef=e}),k(this,"handleCropperChange",({origCrop:e,cropSource:t})=>{const{pinId:n,history:r}=this.props;Object(S.g)({cropArea:e,pinId:n,cropSource:t,isUnified:!1})!==window.location.pathname+window.location.search&&r.replace({pathname:`/pin/${n}/visual-search/`,query:{...e,cropSource:t},search:Object(S.f)({cropArea:e,cropSource:t}),state:{internalNavigation:!0}})}),k(this,"handleSearchIdChange",e=>{this.setState({searchId:e})})}componentDidMount(){const{initialCropArea:e,pinResource:{data:t},pinId:n,history:r,view:i}=this.props;if(!e&&t){const o=Object(y.a)({initialCropArea:e,pin:t}),a=Object(S.g)({cropArea:o,pinId:n,view:i});r.replace(a)}this.flashlightImageContainerRef&&A===n&&(this.flashlightImageContainerRef.scrollTop=R),Object(C.b)(13,{view:72,viewParameter:3050,viewData:{pin_id:n}})}componentDidUpdate(e){j()(e.initialCropArea,this.props.initialCropArea)||this.setState({searchId:""})}componentWillUnmount(){const{pinId:e}=this.props;this.flashlightImageContainerRef&&(R=this.flashlightImageContainerRef.scrollTop,A=e)}renderSpinner(){return Object(r.jsx)(f.O,{accessibilityLabel:c.a._("Loading visual search...","Accessibility label for loading visual search page","Accessibility label for loading visual search page"),show:!0})}renderFlashlight(){const{pinResource:{data:e},initialCropArea:t,initialCropSource:n,location:u,requestContext:l,view:d}=this.props;if(!e)return null;const{width:p,height:h,url:b}=Object(_.a)(e),v=Object(y.a)({initialCropArea:t,pin:e}),x=n||5,j=this.getResourceOptions({pin:e,cropArea:v,width:p,height:h,cropSource:x}),w=p+20,O=!(u&&u.state&&u.state.internalNavigation),C=!!e.visual_objects&&Object(S.b)(e.visual_objects)||[],I=l&&l.isRTL||!1,T=w+16;return Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)(o.a,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:Object(r.jsxs)(f.e,{width:"100%",paddingY:3,paddingX:9,display:"flex",alignItems:"center",children:[Object(r.jsx)(f.e,{position:"absolute",children:Object(r.jsx)(a.a,{pinId:e.id})}),Object(r.jsx)(f.e,{flex:"grow",children:Object(r.jsx)(f.U,{align:"center",weight:"bold",children:Object(r.jsx)("span",{className:"deprecatedTextSizeXL",children:"products"===d?c.a._("Shop similar items","Header explaining results of flashlight products search","Header explaining results of flashlight products search"):c.a._("More Ideas","Header explaining results of flashlight search","Header explaining results of flashlight search")})})})]})}),Object(r.jsx)(E.a,{children:t=>"products"===d?Object(r.jsxs)(f.e,{dangerouslySetInlineStyle:{__style:{marginTop:60}},children:[Object(r.jsx)(m,{resourceOptions:j}),";"]}):Object(r.jsxs)(f.e,{display:"flex",paddingX:12,children:[Object(r.jsx)("div",{style:{position:"fixed",width:w,height:"inherit",overflow:"auto",top:t+60,bottom:0,marginBottom:10},ref:this.saveFlashlightImageContainerRef,children:Object(r.jsx)("div",{"data-test-id":"flashlight-enabled-image",style:{width:p,height:h},children:Object(r.jsxs)(f.B,{height:h,rounding:2,width:p,children:[Object(r.jsx)(f.w,{alt:e.description,naturalHeight:h,naturalWidth:p,src:b}),Object(r.jsx)(s.a,{showAnimation:O,imageSignature:e.image_signature,imageSize:{h,w:p},initialCropArea:v,onChange:this.handleCropperChange,pin:e,spotlightAreas:C})]})})}),Object(r.jsx)("div",{style:{marginLeft:!I&&T,marginRight:I&&T,width:"100%",position:"relative",top:60},children:Object(r.jsx)(g,{resourceOptions:j,onSearchIdChange:this.handleSearchIdChange})})]})})]})}render(){const{pinResource:{isLoaded:e}}=this.props,{searchId:t}=this.state;return Object(r.jsx)(w.a,{view:72,objectId:t,children:Object(r.jsx)("div",{children:e?this.renderFlashlight():this.renderSpinner()})})}}var L=Object(O.compose)(T.k,I.e,Object(d.b)({name:"PinResource",key:"pinResource",options:({pinId:e})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})}))(P),D=n("FF6m"),U=n("RNo4");const M=(...e)=>e.every(Number.isFinite);t.default=Object(D.a)({resourceDependencies:(e,t)=>[{name:"PinResource",options:{id:t.id,field_set_key:"detailed",fetch_visual_search_objects:!0}}]})((function(){const{id:e}=Object(T.i)(),t=Object(T.h)(),n=Object(U.k)(t.search),i=t.pathname.includes("/products"),{x:o,y:a,w:s,h:c,max:u,min:l,cropSource:d}=function(e){return Object.keys(e).reduce((t,n)=>({...t,[n]:parseInt(e[n],10)}),{})}(n),{category:p,domain:f,q:h,rs:m}=n;return Object(r.jsx)(L,{initialCropArea:M(o,a,s,c)?{x:o,y:a,w:s,h:c}:void 0,initialCropSource:d||void 0,pinId:e,searchQuery:h,submittedFilters:{category:p,domain:f,max:u||void 0,min:l||void 0},trafficSource:m,view:i?"products":"flashlight"})}))},NVsV:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("q1tI");const i="__ALL__",o="__NONE__",a={canEnableDebugger:!1,setDebuggerVisible:()=>{},debuggerVisible:!1,setDebuggingEnabled:()=>{},debuggingEnabled:!1,highlightExperiment:e=>{},highlightedExperiment:o,overrideExperiment:(e,t)=>{},overriddenExperiments:{},visibleExperimentCounts:{},setExperimentVisible:(e,t)=>{}},s=Object(r.createContext)(a);t.c=s},NykK:function(e,t,n){var r=n("nmnc"),i=n("AP2z"),o=n("KfNM"),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},QAzJ:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n("q1tI"),i=n("hlDC");function o(e){const t=Object(i.b)(),n=t.v2GetGroup(e)||"",o=function(e){return e.startsWith("enabled")||e.startsWith("employee")}(n),a=(e=>{const t=Object(r.useRef)(!1),n=Object(r.useRef)(!1);return Object(r.useEffect)(()=>{t.current=!0,n.current&&e()},[]),()=>{t.current?e():n.current=!0}})(()=>{t.v2ActivateExperiment(e)});return e=>((null==e?void 0:e.dangerouslySkipActivation)||a(),{group:n,anyEnabled:o})}function a(e,t=!0){const n=o(e);return t?n():{group:"",anyEnabled:!1}}function s(e,t=!0){const n=o(e),{group:r,anyEnabled:i}=n({dangerouslySkipActivation:!0});return t?{group:r,anyEnabled:i}:{group:"",anyEnabled:!1}}function c(e,t=!0){const n=o(e),{group:r,anyEnabled:i}=n({dangerouslySkipActivation:!0});return t?{group:r,anyEnabled:i,customActivate:()=>{n()}}:{group:"",anyEnabled:!1,customActivate:()=>{}}}},QCnb:function(e,t,n){e.exports=n("+wdc")},SLVX:function(e,t,n){function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},"T+9/":function(e,t,n){var r=n("q1tI"),i=n("i8i4"),o=n("/MKj"),a=n("ZbwW"),s=n("D2p8"),c=n("U4JR");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class d extends r.Component{constructor(e){super(e),u(this,"trackImpression",()=>{try{this.node=Object(i.findDOMNode)(this),this.node instanceof HTMLElement&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),u(this,"logImpression",e=>{const{carousel_data:t,closeupImpressionType:n,closeupNavigationType:r,componentType:i,contextLogData:o,elementType:a,impressionAuxFields:s,impressionType:u,loggingId:d,objectIdStr:p,slotIndex:f,trackCarousel:h,viewData:m,viewParameter:b,viewType:v}=this.props,g=l[u],y=g.idType,_=e.forcedExit&&"removed"===e.forcedExit?0:void 0,x={endTime:e.endTime,[y]:d,slotIndex:f,time:e.startTime,renderDuration:e.endTime-e.startTime,type:n,...s,forcedExit:_};if(h||Object(c.b)(g.eventType,{closeup_navigation_type:r,component:i,element:a,eventData:{[g.impressionType]:[x]},objectIdStr:p,view:v,viewData:m||{},viewParameter:b,...o}),t&&h){const{carousel_slots:e,index:n,id:r}=t;Object(c.b)(7352,{component:i,eventData:{pinCarouselSlotImpressions:[{...x,carouselDataId:Number(r),carouselSlotId:e[n]&&Number(e[n].id),slotIndex:n}]},objectIdStr:p,view:v,viewData:m||{},viewParameter:b,...o})}}),this.impressionsFramework=e.impressionsFramework||s.c}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&this.impressionsFramework.stop(this.node)}render(){return r.Children.only(this.props.children)}}t.a=Object(o.connect)((function({pins:e},{loggingId:t}){const n=e[t||""]||{};return{carousel_data:Object(a.a)(n)}}),()=>({}))(d)},TSYQ:function(e,t,n){var r;!function(){var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},U4JR:function(e,t,n){n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n("m2Wt"),i=n("h4v/"),o=n("ajUs"),a=n("zpPL");const s=()=>a.a.instance.getState(),c=()=>{const{advertiser:e,adminUser:t,viewer:n}=s(),r={};return e&&e.id&&(r.advertiser_id=e.id),t&&n&&n.username&&(r.sterling_on_steroids_ldap=t,r.viewed_user=n.username),r},u=(e,{element:t,eventData:n,component:i,objectId:a,view:u,viewParameter:l,viewData:d,durationNs:p,pairId:f,clientTrackingParams:h,...m})=>{const b=r.a.fromEventType(e);return b.setElement(t),b.updateEventData(n),b.setComponent(i),a&&b.setObjectIdStr(a),b.setDurationNs(p),b.updateAuxData({...m,...c()}),b.setViewType(u),b.setViewParameter(l),b.setViewData(d),b.setPairId(f),b.setClientTrackingParams(h||(e=>{const{pins:t,location:n}=s(),r=t&&e&&t[e];return r?Object(o.a)(r,n)||r.tracking_params+"~0":void 0})(a)),b};function l(e,t={}){i.a.getInstance().addEvent(u(e,t))}const d={flushContextEvents:()=>i.a.getInstance().flushEvents(!0),logContextEvent:({aux_data:e,clientTrackingParams:t,component:n,duration_ns:r,element:i,event_data:o,event_type:a,object_id_str:s,pair_id:c,view_data:u,view_parameter:d,view_type:p})=>{l(a,{...e,element:i,eventData:o,component:n,objectId:s,view:p,viewParameter:null!=d?d:void 0,viewData:u,durationNs:r,pairId:c,clientTrackingParams:t})}}},WFqU:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("yLpj"))},WbBG:function(e,t,n){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},Wer7:function(e,t,n){function r(e,t={}){return{type:"RESOURCE_INVALIDATE",payload:{name:e,options:t}}}function i(e,t={},n={}){return{type:"RESOURCE_FETCH",payload:{name:e,options:t,headers:n}}}function o(e,t={},n={},r={}){return{type:"RESOURCE_PREFETCH",payload:{name:e,options:t,headers:r}}}function a(e,t={}){return{type:"RESOURCE_PREFETCH_READ",payload:{name:e,options:t}}}function s(e,t={},n={}){return{type:"RESOURCE_FETCH_MORE",payload:{name:e,options:t,headers:n}}}function c(e,t={}){return{type:"RESOURCE_FETCH_CREATE",payload:{name:e,options:t}}}function u(e,t={},n,r,i,o,a=!1){return{type:"RESOURCE_FETCH_COMPLETE",payload:{auxData:r,data:n,isPrefetch:a,name:e,nextBookmark:o,options:t},error:i}}function l(e,t={},n,r,i,o){return{type:"RESOURCE_FETCH_MORE_COMPLETE",payload:{auxData:r,data:n,name:e,nextBookmark:o,options:t},error:i}}n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l}))},Y8Sn:function(e,t,n){n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m}));var r=n("BcL7");const i=e=>!!e&&!!e.video_list,o=({story_pin_data_id:e})=>!!e,a=e=>e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products.length>0,s=e=>!!e.promoter&&!e.is_downstream_promotion,c=e=>!!e.video_status&&5!==e.video_status,u=e=>!!e.creator_class,l=()=>["employees","enabled"].includes(r.a.getInstance().v2ActivateExperiment("unification_web_pin_click")),d=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:r}=t,i={...n,...r};return!!i[e]&&!i[e].paused},p=e=>["email","messages","deep_linking"].includes(e),f=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:r}=t,i={...n,...r};for(const o in i){const{paused:t}=i[o];if(o!==e&&!t)return!1}return!0},h=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:r}=t,i={...n,...r};return i[e]&&i[e].currentTime},m=()=>{let e=800,t=400;return"undefined"!=typeof window&&(e=window.innerHeight,t=window.innerWidth),{windowHeight:e,windowWidth:t}}},"Ye/N":function(e,t,n){Error;const r={_:e=>e,set(e){Object.assign(this,e)}};t.a=r},ZbwW:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("EDqd");function i(e){const t=(((e||{}).rich_metadata||{}).products||[])[0]||{};return t&&t.additional_images&&t.additional_images.length>0?Object(r.a)(e.images,t,e.carousel_data&&e.carousel_data.index):e&&e.carousel_data}},"aK+E":function(e,t,n){n.d(t,"a",(function(){return o}));const r=new Set(["bookmarks","client_tracking_params","in_nux","invite_code","no_fetch_context_on_resource","original_referrer","source","top_level_source","top_level_source_depth"]),i=e=>!r.has(e)&&!e.startsWith("__track__"),o=e=>e?Object.keys("object"==typeof e&&e||{}).filter(e=>"string"==typeof e).filter(i).sort().map(t=>`${t}=${JSON.stringify(null==e[t]?null:e[t])}`).join(","):""},aOj9:function(e,t,n){n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n("q1tI"),i=n("1dBE");const o=Object(r.createContext)(null),a=()=>Object(r.useContext)(o),s=o.Provider,{Provider:c,useHook:u}=Object(i.c)("DesktopCoreLogin"),l=()=>{const{loginForMore:e}=u();return()=>{e&&e.setVisible(!0)}}},bCCX:function(e,t,n){(function(e,r){var i,o=n("SLVX");i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n("yLpj"),n("3UD+")(e))},d90F:function(e,t,n){n.d(t,"a",(function(){return r.a}));var r=n("ESls");n("nKUr"),n("0rqB"),n("pLLR")},hlDC:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("1dBE");const{Provider:i,Consumer:o,useHook:a}=Object(r.c)("ExperimentContext")},jZXB:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("zir5");class i extends r.a{constructor(){super({},{},!1)}v2ActivateExperiment(e){return null}v2LogExperimentGroupOverride(e,t,n){}}},lSCD:function(e,t,n){var r=n("NykK"),i=n("GoyQ");e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},nmnc:function(e,t,n){var r=n("Kz5y").Symbol;e.exports=r},pLLR:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n("nKUr"),i=n("q1tI");const o=Object(i.createContext)(),a=o.Provider;function s(e){function t(t){const n=Object(i.useContext)(o);if(!n)throw new Error("withRequestContext must be used within a RequestContextProvider");return Object(r.jsx)(e,{...t,requestContext:n})}return t.displayName=`withRequestContext(${String(e.displayName||e.name)})`,t}const c=({children:e})=>{const t=Object(i.useContext)(o);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)},u=({children:e})=>{const t=Object(i.useContext)(o);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)};function l(){const e=Object(i.useContext)(o);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e}},qD10:function(e,t,n){var r=n("nKUr"),i=n("q1tI"),o=n("/MKj"),a=n("zwad"),s=n("ANjH"),c=n("Y8Sn"),u=n("z19Z"),l=n("EC67");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends i.Component{constructor(...e){super(...e),d(this,"state",{spamCheck:null}),d(this,"spamCheckExperimentGroup",null),d(this,"mounted",!1),d(this,"handleSpammyDomainCheck",()=>{const{external:e,location:t,pinId:n,pin:r,surface:i,to:o}=this.props;(e||a.a.isOffsiteUrl(o))&&r&&!Object(c.g)(r)&&Object(u.f)({location:t,pinId:n,surface:i})&&o&&Object(u.a)({isMounted:this.mounted,pin:r,location:t,spamCheckCallback:e=>this.setState({spamCheck:e}),href:o})}),d(this,"handleClick",e=>{const{auxData:t,external:n,focusOnBody:r,forceOnClick:i,history:o,internalNewTab:s,location:c,onClick:l,pin:d,pinId:p,shouldShowAltLinks:f,stopPropagation:h,to:m}=this.props;h&&e.stopPropagation();const b=n||a.a.isOffsiteUrl(m);Object(u.b)({isExternalLink:b,event:e,forceOnClick:i})||(e.nativeEvent.preventDefault(),l&&l(e),m&&!f&&(b?Object(u.c)({href:m,pinId:p,pin:d,location:c,auxData:t,spamCheck:this.state.spamCheck}):Object(u.d)({event:e,onHistoryChange:()=>{r&&Object(u.e)()},href:m,history:o,target:s?"blank":null})))})}componentDidMount(){this.mounted=!0,this.handleSpammyDomainCheck()}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){null===this.state.spamCheck&&this.handleSpammyDomainCheck()}render(){const{accessibilityLabel:e,children:t,className:n,"data-test-id":i,external:o,noFollow:a,setAnchorRef:s,style:c,tabIndex:u,target:l,to:d}=this.props;return Object(r.jsx)("a",{"aria-label":e,className:n,"data-test-id":i,href:d,onClick:this.handleClick,ref:s,rel:o||a?"nofollow":"",style:c,tabIndex:u,target:l?"_blank":null,children:t})}}t.a=Object(s.compose)(Object(o.connect)((function({pins:e},{pinId:t}){return{pin:t&&e&&e[t]}}),()=>({})),l.k)(p)},rYoy:function(e,t,n){var r=n("E8d4");t.a=r.a},sErn:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("La7j");class i extends r.a{v2ActivateExperiment(e){throw new Error("Not implemented by SeoExperimentsClient.")}}class o extends r.a{constructor(e,t,n,r=!1){var i,o,a;super(e,t,r),a={},(o="logged")in(i=this)?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,this.isBot=!!n}v2ActivateExperiment(e){if(this.isBot){const t="seo_"+e;let n=this.logged[t];return void 0===n&&(n=this.active[t],void 0!==n&&(this.logged[t]=n,super.v2LogExperimentGroupOverride(t,n,!0))),n}return super.v2ActivateExperiment(e)}}function a(e,t){e||(e={});const{active_experiments:n,triggerable_experiments:a,seo_experiments:s,is_bot:c,path:u,batch_exp:l}=e,d="true"===c,p=new r.a(n,a,l),f=new i(s,{},l),h=new o(d?s:n,d?{}:a,d,l);if(t){const e=t.queuedV2ActivateExperiment,n=t.queuedV2ExperimentGroupOverrides,r=t.queuedLogTrfExperiments;p.v2ActivateExperiment=function(t){return e.push(t),this.v2GetGroup(t)},f.v2ActivateExperiment=function(e){return r.push({name:e,id:u}),this.v2GetGroup(e)},h.v2ActivateExperiment=function(t){if(this.v2GetGroup(t))return e.push(t),this.v2GetGroup(t);{const e=this.v2GetSEOGroup("seo_"+t);return e?(r.push({name:"seo_"+t,id:u}),e):void 0}},h.v2LogExperimentGroupOverride=function(e,t){n.push({name:e,override_group:t})}}return{experiments:p,seoExperiments:f,seoUnauthExperiments:h}}},"v/Q4":function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("/MKj");function i(){return Object(r.useSelector)(({viewer:e})=>e)}},w70y:function(e,t,n){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n("nKUr"),i=n("q1tI"),o=n("/MKj"),a=n("lSCD"),s=n.n(a),c=n("aK+E"),u=n("EC67"),l=n("Wer7");const d={};function p({acceptPrefetch:e,allowStale:t,enabledRouteRefresh:n,dangerouslyDisableFetch:r,options:a,name:s,headers:p}){const f=Object(o.useDispatch)(),h=Object(c.a)(a),m=Object(i.useRef)(),b=e=>(e[s]||d)[h]||d,{isPrefetch:v,nextBookmark:g,prefetchHasBeenRead:y}=Object(o.useSelector)(({resources:e})=>b(e.data)),_=Object(o.useSelector)(({resources:e})=>b(e.data).data),x=Object(o.useSelector)(({resources:e})=>b(e.data).auxData),j=Object(o.useSelector)(({resources:e})=>b(e.data).error),w=Object(o.useSelector)(({resources:e})=>Boolean((e.fetching[s]||d)[h])),O=Object(o.useSelector)(({resources:e})=>Boolean((e.data[s]||d)[h])),E=Object(u.g)(),C=E&&"POP"!==E.action,S=Boolean(O&&n&&C&&!r),[I,T]=Object(i.useState)(S);void 0===m.current&&O&&C&&e&&v&&!y&&!r&&f(Object(l.h)(s,a));const k=Object(i.useCallback)(()=>{r||f(Object(l.a)(s,a,p))},[r,f,p,s,h]),R=Object(i.useCallback)(()=>{r||f(Object(l.d)(s,a,p))},[r,p,s,h]),A=Object(i.useCallback)(()=>{r||(k(),T(!0))},[r,k,T]),P=Object(i.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:R,isAtEnd:!1,isFetching:!1,isLoaded:!1,isPrefetch:void 0,isRefreshing:!1,nextBookmark:void 0,prefetchHasBeenRead:void 0,refreshData:A});Object(i.useEffect)(()=>{!1!==t&&O&&!S||k()},[]),Object(i.useEffect)(()=>{void 0!==m.current&&h!==m.current&&k(),m.current=h},[h]);const L={auxData:x,data:_,error:j,fetchMore:R,isAtEnd:O&&!w&&"-end-"===g,isFetching:w,isLoaded:O,isPrefetch:v,isRefreshing:I,nextBookmark:g,prefetchHasBeenRead:y,refreshData:A};return Object(o.shallowEqual)(L,P.current)||(!I||!P.current.data&&S||Object(o.shallowEqual)(L.data,P.current.data)||(L.isRefreshing=!1,T(!1)),P.current=L),P.current}function f(e){const t=e.key;return function(n){function i(i){const{dangerouslyDisableFetch:o,options:a,key:c,...u}=e,l=p({...u,options:(s()(a)?a(i):a)||{},dangerouslyDisableFetch:!!o&&o(i)}),d={[t]:l};return Object(r.jsx)(n,{...i,...d})}return i.displayName=`withResource[${e.name}](${n.displayName||n.name||""})`,i.WrappedComponent=n,i}}},xjqW:function(e,t,n){function r({id:e,isProduct:t,isPromoted:n,videoDuration:r,viewParameter:i,viewType:o,type:a}){return{type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:t,isPromoted:n,videoDuration:r,viewParameter:i,viewType:o,type:a}}}function i(){return{type:"REPORT_CONTENT_DISMISS"}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))}},[["MUNL","runtime","vendor-react",0,3,1,2,7,9,10,11,12,13,14,23,212]],[97,110,225,289,"PinBetterSaveCommon","PinSaveButtonCommon","PinRepEditButtonCommon","PinPromoteButtonCommon","PinRepSendShareLinkButtonCommon","QuickSaveButtonCommon"]]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/www/pin/[id]/visual-search-authdesktop-fd50d59d0946bef27f54.mjs.map